{%extends 'basic.html'%}
{% load static%}
{% block title%}USERS TICKETS{%endblock%}


{% block body%}
<style>
    .banner {
      position: relative;
      width: 300px;
      /* height:auto; */
      overflow: hidden;
      margin-left: auto;
      margin-right: auto;

    }

  </style>
  
    <!-- {% if obj != None%}
<div class="lg:w-2/3 w-full mx-auto overflow-auto" style="margin-top: 5%;">
    <table class="table-auto w-full text-left whitespace-no-wrap">
        <thead>
            <tr>
                <th class="px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-200 rounded-tl rounded-bl"
                    style="background-color: black;color: whitesmoke;font-weight: bolder;">
                    UserName</th>
                <th class="px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-200"
                    style="background-color: black;color: whitesmoke;font-weight: bolder;">Subject
                </th>
                <th class="px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-200"
                    style="background-color: black;color: whitesmoke;font-weight: bolder;">Query</th>
                    <th class="px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-200"
                    style="background-color: black;color: whitesmoke;font-weight: bolder;">Status</th>
                <th class="px-3 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-200"
                    style="background-color: black;color: whitesmoke;font-weight: bolder;">Reply</th>
            </tr>
        </thead>
        <tbody>
            {% for i in obj %}
            <form method="post" action="/Account/msg/">
                {% csrf_token %}
                <tr style="font-weight: bolder;background-color: whitesmoke;">
                    <input type="hidden" name="pk" value="{{i.pk}}">
                    <td class="px-4 py-3"><input type="hidden" name="UserName" value="{{i.UserName}}">{{i.UserName}}
                    </td>
                    <td class="px-4 py-3"><input type="hidden" name="Subject" value="{{i.Subject}}">{{i.Subject}}</td>
                    <td class="px-4 py-3"><input type="hidden" name="Query" value="{{i.Query}}">{{i.Query}}</td>
                    {% if i.Status == False %}
                    <td class="px-4 py-3"><input type="hidden" name="Query" value="{{i.Query}}">Pending</td>
                    {%else%}
                    <td class="px-4 py-3"><input type="hidden" name="Query" value="{{i.Query}}">Solved</td>
                    {%endif %}

                    {% if i.Status == False %}
                    <td class="px-4 py-3"><input
                            style="width:auto;color:whitesmoke;background-color:#252525;border-radius: 20px;padding: 5px;"
                            type="text" placeholder=" Write Reply Here" name="msg">
                    </td>
                    {%else%}
                    <td class="px-4 py-3"><input type="hidden" name="Subject" value="{{i.Subject}}">Solved</td>
                    {%endif %}
                </tr>
            </form>
            {% endfor %}
        </tbody>
    </table>
</div>

{% else %}
            <div class="flex flex-col text-center w-full mb-20" style="margin-top: 10%;">
                <h1 class="sm:text-4xl text-3xl font-medium title-font mb-2 text-gray-900" style="color:red">You Have No Any Messages</h1>
            </div>
{% endif %} -->

{% if obj %}
<section class="text-gray-700 body-font"  style="padding-top: 5rem;">
    <div class="container">
        <div class="lg:w-2/3 w-full mx-auto overflow-auto">
            <div class="flex flex-col text-center w-full mb-10">
                <h1 class="sm:text-4xl text-3xl font-medium title-font mb-2 text-gray-900"> USERS TICKETS</h1>
            </div>
            <table class="table-hover table-auto w-full text-left whitespace-no-wrap-table-responsive-xl">
                <thead>
                    <tr class="table-active">
                        <th
                            class="px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-200 rounded-tl rounded-bl">
                            UserName</th>
                        <th
                            class="px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-200">
                            Subject</th>
                        <th
                            class="px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-200">
                            Query
                        </th>
                        <th
                            class="px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-200">
                            Status
                        </th>
                        <th
                            class="px-4 py-3 title-font tracking-wider font-medium text-gray-900 text-sm bg-gray-200">
                            Reply
                        </th>
                    </tr>
                </thead>
                <tbody>
                    {% for i in obj %}
                    <form method="post" action="/Account/msg/">
                        {% csrf_token %}
                        <tr>
                            <td class="px-4 py-3">{{i.UserName}}</td>
                            <td class="px-4 py-3">{{i.Subject}}</td>
                            <td class="px-4 py-3">{{i.Query}}</td>
                            {% if i.Status == False %}
                            <td class="px-4 py-3">Pending</td>
                            {%else%}
                            <td class="px-4 py-3">Solved</td>
                            {%endif %}
                            <input type="hidden" name="key" value="{{i.pk}}">
                            <input type="hidden" name="U" value="{{i.UserName}}">
                            <input type="hidden" name="S" value="{{i.Subject}}">
                            <input type="hidden" name="Q" value="{{i.Query}}">
                            {% if i.Status == False %}
                            <td class="px-4 py-3"><input
                                    style="width:auto;color:whitesmoke;background-color:#252525;border-radius: 20px;padding: 5px;"
                                    type="text" placeholder=" Write Reply Here" name="msg">
                            </td>
                            {%else%}
                            <td class="px-4 py-3">{{i.Response}}</td>
                            {%endif %}
                        </tr>
                    </form>
                    {% endfor %}
                </tbody>
            </table>
        </div>
</section>
{%else%}
<div class="flex flex-col text-center w-full mb-20 pt-20">
    <img src="/static/msg.svg" class="banner"><br>
    <h1 class="sm:text-4xl text-3xl font-medium title-font mb-2 text-gray-900" style="color:red">You Have No Any Query</h1>
</div>

{%endif%}

{%endblock%}